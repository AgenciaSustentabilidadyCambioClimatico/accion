!function(u,d){var s;u.rails=s={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var e=u('meta[name="csrf-token"]').attr("content");e&&t.setRequestHeader("X-CSRF-Token",e)},fire:function(t,e,a){var n=u.Event(e);return t.trigger(n,a),!1!==n.result},confirm:function(t){return confirm(t)},ajax:function(t){return u.ajax(t)},handleRemote:function(n){var t,e,a,i,r=n.data("cross-domain")||null,o=n.data("type")||u.ajaxSettings&&u.ajaxSettings.dataType;if(s.fire(n,"ajax:before")){if(n.is("form")){t=n.attr("method"),e=n.attr("action"),a=n.serializeArray();var l=n.data("ujs:submit-button");l&&(a.push(l),n.data("ujs:submit-button",null))}else n.is(s.inputChangeSelector)?(t=n.data("method"),e=n.data("url"),a=n.serialize(),n.data("params")&&(a=a+"&"+n.data("params"))):(t=n.data("method"),e=n.attr("href"),a=n.data("params")||null);return i={type:t||"GET",data:a,dataType:o,crossDomain:r,beforeSend:function(t,e){return e.dataType===d&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),s.fire(n,"ajax:beforeSend",[t,e])},success:function(t,e,a){n.trigger("ajax:success",[t,e,a])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,a){n.trigger("ajax:error",[t,e,a])}},e&&(i.url=e),s.ajax(i)}return!1},handleMethod:function(t){var e=t.attr("href"),a=t.data("method"),n=t.attr("target"),i=u("meta[name=csrf-token]").attr("content"),r=u("meta[name=csrf-param]").attr("content"),o=u('<form method="post" action="'+e+'"></form>'),l='<input name="_method" value="'+a+'" type="hidden" />';r!==d&&i!==d&&(l+='<input name="'+r+'" value="'+i+'" type="hidden" />'),n&&o.attr("target",n),o.hide().append(l).appendTo("body"),o.submit()},disableFormElements:function(t){t.find(s.disableSelector).each(function(){var t=u(this),e=t.is("button")?"html":"val";t.data("ujs:enable-with",t[e]()),t[e](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(s.enableSelector).each(function(){var t=u(this),e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(t){var e,a=t.data("confirm"),n=!1;return!a||(s.fire(t,"confirm")&&(n=s.confirm(a),e=s.fire(t,"confirm:complete",[n])),n&&e)},blankInputs:function(t,e,a){var n,i=u(),r=e||"input,textarea";return t.find(r).each(function(){n=u(this),(a?n.val():!n.val())&&(i=i.add(n))}),!!i.length&&i},nonBlankInputs:function(t,e){return s.blankInputs(t,e,!0)},stopEverything:function(t){return u(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(t,a){var e=t.data("events"),n=!0;return e!==d&&e.submit!==d&&u.each(e.submit,function(t,e){if("function"==typeof e.handler)return n=e.handler(a)}),n},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return s.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==d&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},u.ajaxPrefilter(function(t,e,a){t.crossDomain||s.CSRFProtection(a)}),u(document).delegate(s.linkDisableSelector,"ajax:complete",function(){s.enableElement(u(this))}),u(document).delegate(s.linkClickSelector,"click.rails",function(t){var e=u(this),a=e.data("method"),n=e.data("params");return s.allowAction(e)?(e.is(s.linkDisableSelector)&&s.disableElement(e),e.data("remote")!==d?!(!t.metaKey&&!t.ctrlKey||a&&"GET"!==a||n)||(!1===s.handleRemote(e)&&s.enableElement(e),!1):e.data("method")?(s.handleMethod(e),!1):void 0):s.stopEverything(t)}),u(document).delegate(s.inputChangeSelector,"change.rails",function(t){var e=u(this);return s.allowAction(e)?(s.handleRemote(e),!1):s.stopEverything(t)}),u(document).delegate(s.formSubmitSelector,"submit.rails",function(t){var e=u(this),a=e.data("remote")!==d,n=s.blankInputs(e,s.requiredInputSelector),i=s.nonBlankInputs(e,s.fileInputSelector);return s.allowAction(e)?n&&e.attr("novalidate")==d&&s.fire(e,"ajax:aborted:required",[n])?s.stopEverything(t):a?i?s.fire(e,"ajax:aborted:file",[i]):!u.support.submitBubbles&&u().jquery<"1.7"&&!1===s.callFormSubmitBindings(e,t)?s.stopEverything(t):(s.handleRemote(e),!1):void setTimeout(function(){s.disableFormElements(e)},13):s.stopEverything(t)}),u(document).delegate(s.formInputClickSelector,"click.rails",function(t){var e=u(this);if(!s.allowAction(e))return s.stopEverything(t);var a=e.attr("name"),n=a?{name:a,value:e.val()}:null;e.closest("form").data("ujs:submit-button",n)}),u(document).delegate(s.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&s.disableFormElements(u(this))}),u(document).delegate(s.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&s.enableFormElements(u(this))})}(jQuery);