.modal.fade.reload-previsualizar{id: :"modal-11", tabindex: "-1", role: :dialog, "aria-labelledby": :modal4Label, "aria-hidden": true}
  .modal-dialog.modal-dialog-centered.modal-xxl.animated{role: :document}
    .modal-content
      .modal-header
        =t(:mecanismo_de_adhesión_implementación_y_evaluación_de_cumplimiento)
      .modal-body
        .row
          .col-12.col-lg-6
            = f.input :mecanismo_de_implementacion, label: t(:mecanismo_de_adhesión_implementación_y_evaluación_de_cumplimiento), as: :ckeditor, input_html: {value: @datos["mecanismo_de_implementacion"], ckeditor: {height: 300}}
          .col-12.col-lg-6
            .row
              .col-12
                = f.label t(:palabras_claves)
                %br
                  - InformeAcuerdo.palabras_claves("mecanismo_de_implementacion").keys.each do |palabra|
                    ="[#{palabra}] "
              .col-12.mt-2
                = f.label t(:plazo_de_implemetación_y_certificación)
                = f.input :tipo_acuerdo, as: :radio_buttons, collection: InformeAcuerdo.tipo_acuerdos.keys.map { |w| [t(w), w] }, label: false, input_html: { class: 'mr-2'}
              .col-12.col-lg-6
                = f.input :plazo_maximo_adhesion, label: t(:plazo_máximo_adhesión_en_meses), input_html: { class: "numero" }, as: :string
              .col-12.col-lg-6
                = f.input :plazo_finalizacion_implementacion, label: t(:plazo_finalización_implementación), input_html: {class: "numero", value: f.object.manifestacion_de_interes.flujo.plazo_maximo_acciones_meses }, as: :string, readonly: true
              .col-12
                .card.mt-2
                  .card-header
                    %label.control-label=t(:auditorías)
                    = link_to '#', class: 'pull-right add-auditoria' do
                      %i.fa.fa-plus-circle
                      = t(:agregar)
                  .card-body.p-0
                    .table-responsive
                      %table.table.table-striped.table-bordered#tabla_auditoria
                        %thead
                          %tr
                            %th=t(:auditoría_intermedia)
                            %th=t(:plazo_apertura)
                            %th=t(:plazo_cierre)
                            %th=t(:certificable_si_no)
                            %th=t(:con_validación)
                            %th=t(:final)
                            %th=t(:mantención)
                            %th
                        %tbody
                          - @auditorias.each do |aud|
                            %tr.auditoria-row{"data-id" => aud.id}
                              %td
                                = text_field_tag "informe_acuerdo[auditorias][#{aud.id}][nombre]", aud.nombre, {class: "form-control informe_acuerdo_auditoria_nombre", onchange: "cambio_nombre_auditoria('#{aud.id}');"}
                              %td{style: "width:70px;min-width:70px;max-width:70px;"}
                                = text_field_tag "informe_acuerdo[auditorias][#{aud.id}][plazo_apertura]", aud.plazo_apertura, class: "form-control numero"
                              %td{style: "width:70px;min-width:70px;max-width:70px;"}
                                = text_field_tag "informe_acuerdo[auditorias][#{aud.id}][plazo_cierre]", aud.plazo_cierre, class: "form-control numero"
                              %td
                                = check_box_tag "informe_acuerdo[auditorias][#{aud.id}][con_certificacion]", true, aud.con_certificacion?, {class: "form-control con-certificacion", onclick: "certificacion_activa_validacion('#{aud.id}');"}
                              %td
                                = hidden_field_tag "informe_acuerdo[auditorias][#{aud.id}][con_validacion]", false
                                = check_box_tag "informe_acuerdo[auditorias][#{aud.id}][con_validacion]", true, aud.con_validacion?, class: "form-control con-validacion", disabled: !aud.con_certificacion?
                              %td
                                = radio_button_tag "informe_acuerdo[auditorias][#{aud.id}][final]", true, aud.final?, {class: "form-control auditoria-final", onclick: "solo_una_auditoria_final('#{aud.id}');"}
                              %td
                                = check_box_tag "informe_acuerdo[auditorias][#{aud.id}][con_mantencion]", true, aud.con_mantencion?, {class: "form-control auditoria-final con-mantencion", readonly: !aud.final?}
                              %td
                                = hidden_field_tag "informe_acuerdo[auditorias][#{aud.id}][id]", aud.id, class: 'auditoria-id'
                                = link_to '#', {class: 'remove-auditoria', onclick: "remover_auditoria('#{aud.id}');"} do
                                  %i.fa.fa-times-circle.link-to-remove-row
      .modal-footer
        %button.btn.btn-primary.terminar-button{type: :button, "data-dismiss"=>:modal}
          Terminar
