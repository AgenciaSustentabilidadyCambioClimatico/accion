= simple_form_for @registro_proveedor, remote: true do |f|
  .row
    .col-12.mt-3
      %h1.titulo='Solicitud de Registro'
      .col-12
        .card
          .card-header
            %h5.no-margin
              %b Datos Solicitante
            %h5.no-margin=titulo_acuerdo.html_safe
          .card-body
            .row
              .col-12.col-lg-3
                =f.input :rut
              .col-12.col-lg-4
                =f.input :nombre, error: "algo nuevo"
              .col-12.col-lg-4
                =f.input :apellido, required: true, input_html: {class: "validado check-boton-llenado"}
              .col-12.col-lg-6
                =f.input :email, error: true, input_html: {class: "form-control help-block"}
              .col-12.col-lg-6
                =f.input :telefono
              .col-12.col-lg-4
                =f.input :profesion
              .col-12
                =f.input :direccion
              .col-12.col-lg-4
                =f.input :region, collection: Region.all.map{|r| [r.nombre, r.id]}, wrapper: false
              .col-12.col-lg-4
                =f.input :comuna, collection: Comuna.all.map{|c| [c.nombre, c.id]}, wrapper: false
              .col-12.col-lg-4
                =f.input :ciudad
              .col-12
                =f.input :asociar_institucion, as: :boolean
              .col-12
                =f.fields_for :contribuyente do |m|
                  =m.input :rut
                  =m.input :razon_social
                  =m.input :dv
      .col-12
        .card
          .card-header
            %h5.no-margin
              %b Registro
          .card-body
            .row
              .col-12.col-lg-4
                =f.input :tipo_contribuyente_id, collection: TipoContribuyente.all.map{|tc| [[tc.descripcion, tc.id], tc.id] } , label: 'A que postula?',input_html: {class: 'validado chosen-control check-boton-llenado'}
              .col-12
                = f.simple_fields_for :certificado_proveedores do |certificado|
                  = render 'certificado_proveedor_fields', f: certificado
                .links
                  = link_to_add_association raw('<i class="fa fa-plus"></i>'), f, :certificado_proveedores, class: 'btn btn-success btn-sm px-3 mt-3'
              .col-12
                .pt-3
                  =f.input :terminos_y_servicion, as: :boolean, label: 'acepto que la información proporcionada con motivo de la presente postulación sea publicada por la ASCC en el correspondiente registro'
  .float-right
    = link_to t(:back), adherir_a_un_acuerdo_path, class: 'btn btn-warning btn-sm'
    =f.submit 'Enviar', class: 'btn btn-primary btn-sm'

:javascript

  $(document).ready(function(){
    $('#registro_proveedor_contribuyente_id').chosen({
        allow_single_deselect: false,
        no_results_text: 'No se encontraron resultados',
        width: '100%',
        search_contains: true,
        placeholder_text_single: "Seleccione un contribuyente",
      });
  })
